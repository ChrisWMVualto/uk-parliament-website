<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>OpenTelly HLS-player</title>
    <style>
        #player, .video-player {
            width: 853px;
            height: 480px;
        }
    </style>

    <link href="css/player.css" rel="stylesheet">
    </head>
    <body>
        <video class="video-player" src="http://nafw-live.hls.adaptive.level3.net/a/35764a19-6abe-4e5f-ad7b-969dd154e19a/interpretation/interpretation.isml/interpretation.m3u8?t=2014-11-19T13:30:19" preload="none" controls="controls">
        </video>

        <div class="description">
            The current program-date-time is: <span id="currentProgramDateTime" style="color: #f00;">empty</span><br />
        </div>

        <script>
            theoplayer = {
                configuration : {
                    allowManualQualitySwitch : true
                }
            };
        </script>

        <script type="text/javascript" src="http://cdn.theoplayer.com/60ddaae0-2c60-11e4-8c21-0800200c9a66.js"></script>

        <script>
            var downloadControl;
            setTimeout(function () {
                var container = document.getElementById('currentProgramDateTime'),
                    player = theoplayer.players[0];


                player.addEventListener('timeupdate', function () {
                    container.innerHTML = JSON.stringify(player.currentProgramDateTime);
                });

                player.play();

                // In order to seek to a specific program-date-time, you can set a date-object on the currentProgramDateTime-property:
                //player.currentProgramDateTime = new Date('2014-10-24T09:01:23+02:00');

                Node.prototype.addClass = function(className) {
                    this.classList.add(className);
                    return this;
                }

                Node.prototype.addAttr = function(key, value) {
                    this.setAttribute(key, value);
                    return this;
                }

                function overrideTheoplayerPlayTime(datetime) {
                    var timestring = ("0" + datetime.getHours()).slice(-2);
                    timestring += ':';
                    timestring += ("0" + datetime.getMinutes()).slice(-2);
                    timestring += ':';
                    timestring += ("0" + datetime.getSeconds()).slice(-2);

                    var timeContainers = document.getElementsByClassName('vjs-current-time vjs-time-controls')[0].getElementsByClassName('vjs-current-time-display');
                    if (timeContainers.length === 1) {
                        var replacement = document.createElement('div').addClass('vjs-current-time-display').addClass('override-replacement').addAttr('aria-live', 'off');
                        document.getElementsByClassName('vjs-current-time vjs-time-controls')[0].appendChild(replacement);
                        timeContainers[0].addAttr('style', 'display: none;');
                        timeContainers = document.getElementsByClassName('vjs-current-time-display');
                    }

                    timeContainers[1].textContent = timestring;
                }
                overrideTheoplayerPlayTime(new Date());

                /*var videos = document.getElementsByClassName('theoplayer');
                for (var i = 0; i < videos.length; i++) {
                    var video = videos[i];

                    var qualitySettings = video.getElementsByClassName('theoplayer-resolution-button')[0].getElementsByClassName('vjs-menu-item');
                    qualitySettings[0].textContent = "High";
                    qualitySettings[1].textContent = "Medium";
                    qualitySettings[2].textContent = "Low";
                }*/

            }, 500);
        </script>
    </body>
</html>
